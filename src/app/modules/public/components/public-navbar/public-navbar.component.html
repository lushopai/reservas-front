<mat-toolbar color="primary" class="navbar-material">
  <div class="navbar-container">
    <!-- Logo / Brand -->
    <a class="navbar-brand" routerLink="/">
      <mat-icon class="brand-icon">cottage</mat-icon>
      <span class="brand-text">Cabañas & Servicios</span>
    </a>

    <!-- Spacer -->
    <span class="navbar-spacer"></span>

    <!-- Desktop Menu -->
    <div class="navbar-menu desktop-only">
      <a mat-button routerLink="/" routerLinkActive="active-link" [routerLinkActiveOptions]="{exact: true}">
        <mat-icon>home</mat-icon>
        Inicio
      </a>
      <a mat-button routerLink="/cabanas" routerLinkActive="active-link">
        <mat-icon>holiday_village</mat-icon>
        Cabañas
      </a>
      <a mat-button routerLink="/servicios" routerLinkActive="active-link">
        <mat-icon>stars</mat-icon>
        Servicios
      </a>
    </div>

    <!-- Desktop User Actions -->
    <div class="navbar-actions desktop-only">
      <!-- Si NO está logueado -->
      <ng-container *ngIf="!isLoggedIn">
        <button mat-stroked-button class="action-button" (click)="goToLogin()">
          <mat-icon>login</mat-icon>
          Iniciar Sesión
        </button>
        <button mat-raised-button color="accent" (click)="goToRegister()">
          <mat-icon>person_add</mat-icon>
          Registrarse
        </button>
      </ng-container>

      <!-- Si SÍ está logueado -->
      <ng-container *ngIf="isLoggedIn">
        <button mat-stroked-button class="action-button" (click)="goToDashboard()">
          <mat-icon>{{ userRole === 'ADMIN' ? 'admin_panel_settings' : 'event_note' }}</mat-icon>
          {{ userRole === 'ADMIN' ? 'Panel Admin' : 'Mis Reservas' }}
        </button>
        <button mat-raised-button color="accent" (click)="logout()">
          <mat-icon>logout</mat-icon>
          Salir
        </button>
      </ng-container>
    </div>

    <!-- Mobile Menu Button -->
    <button mat-icon-button class="mobile-only" (click)="toggleMenu()">
      <mat-icon>{{ isMenuOpen ? 'close' : 'menu' }}</mat-icon>
    </button>
  </div>
</mat-toolbar>

<!-- Mobile Menu Drawer -->
<div class="mobile-menu" [class.open]="isMenuOpen">
  <div class="mobile-menu-content">
    <!-- Navigation Links -->
    <div class="mobile-nav-links">
      <a mat-button routerLink="/" routerLinkActive="active-link" [routerLinkActiveOptions]="{exact: true}" (click)="closeMenu()">
        <mat-icon>home</mat-icon>
        Inicio
      </a>
      <a mat-button routerLink="/cabanas" routerLinkActive="active-link" (click)="closeMenu()">
        <mat-icon>holiday_village</mat-icon>
        Cabañas
      </a>
      <a mat-button routerLink="/servicios" routerLinkActive="active-link" (click)="closeMenu()">
        <mat-icon>stars</mat-icon>
        Servicios
      </a>
    </div>

    <mat-divider></mat-divider>

    <!-- User Actions -->
    <div class="mobile-user-actions">
      <!-- Si NO está logueado -->
      <ng-container *ngIf="!isLoggedIn">
        <button mat-stroked-button color="primary" class="mobile-action-btn" (click)="goToLogin(); closeMenu()">
          <mat-icon>login</mat-icon>
          Iniciar Sesión
        </button>
        <button mat-raised-button color="primary" class="mobile-action-btn" (click)="goToRegister(); closeMenu()">
          <mat-icon>person_add</mat-icon>
          Registrarse
        </button>
      </ng-container>

      <!-- Si SÍ está logueado -->
      <ng-container *ngIf="isLoggedIn">
        <button mat-stroked-button color="primary" class="mobile-action-btn" (click)="goToDashboard(); closeMenu()">
          <mat-icon>{{ userRole === 'ADMIN' ? 'admin_panel_settings' : 'event_note' }}</mat-icon>
          {{ userRole === 'ADMIN' ? 'Panel Admin' : 'Mis Reservas' }}
        </button>
        <button mat-raised-button color="warn" class="mobile-action-btn" (click)="logout(); closeMenu()">
          <mat-icon>logout</mat-icon>
          Salir
        </button>
      </ng-container>
    </div>
  </div>
</div>

<!-- Backdrop for mobile menu -->
<div class="mobile-backdrop" [class.visible]="isMenuOpen" (click)="closeMenu()"></div>
